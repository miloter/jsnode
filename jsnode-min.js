var $,$$;
/**
 * @summary JsNode es similar a un jQuery reducido usando solo ES6+ y
 * el sistema de Promises/async/await donde es necesario.
 * @copyright miloter
 * @license MIT
 * @since 2025-06-06 
 * @version 0.6.0 2025-06-23
 */class JsNode{static#e=["domingo","lunes","martes","miércoles","jueves","viernes","sábado"];static#t=JsNode.#e.map((e=>e.substring(0,3)));static#s=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];static#o=JsNode.#s.map((e=>e.substring(0,3)));static#n=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HR","LI","MAIN","NAV","NOSCRIPT","OL","P","PRE","SECTION","TABLE","TFOOT","UL","VIDEO"];static#i=60;static#a=[];static#r=!1;#d;constructor(e){try{if("string"==typeof e)this.#d=Array.from(document.querySelectorAll(e));else if(e instanceof HTMLElement)this.#d=[e];else if(e instanceof NodeList)this.#d=Array.from(e);else if(e instanceof Array)this.#d=e;else if(e instanceof JsNode)this.#d=e.nodes;else{if(void 0!==e)throw new TypeError(`Selector no válido: ${e}`);this.#d=[]}}catch(e){this.#d=[]}}static#h(e,t){if(!e.listeners)return;const s=e.listeners[t];if(s){for(const o of s)e.removeEventListener(t,o);delete e.listeners[t]}}static#c(e){if(e.listeners)for(const t in e.listeners)JsNode.#h(e,t)}static#l(e){e.displayComputed&&delete e.displayComputed}static#p(e,t,s){null===s?e.removeAttribute(t):e.setAttribute(t,s)}static async#u(e,t){const s={};return s.response=e,s.data="json"===t?await e.json():"text"===t?await e.text():await e.blob(),s}static async#f(e,t,s,o){let n,i;return"json"===(o=o.toLowerCase())?(n={"Content-Type":"application/json"},i=JSON.stringify(s)):(n={"Content-Type":"application/x-www-form-urlencoded"},i=JsNode.objectToUrlEncoded(s)),fetch(e,{credentials:"include",headers:n,method:t,body:i}).then((e=>JsNode.#u(e,o)))}static async#m(e,t,s,o){return o=o.toLowerCase(),(s=JsNode.objectToUrlEncoded(s))&&(e+="?"+s),fetch(e,{credentials:"include",method:t}).then((e=>JsNode.#u(e,o)))}static#y(e=1){return JsNode.#r?Promise.resolve():new Promise((t=>setTimeout(t,e)))}static#g(e){const{display:t,width:s,height:o,opacity:n,overflow:i}=getComputedStyle(e);return{display:t,width:s,height:o,opacity:n,overflow:i}}static async#N(e,t,s){const o=t/JsNode.#i,n=JsNode.#b(e);let i,a,r,d,h,c;for("inline"===n.display&&(s="opacity"),"inline"!==n.display&&(i="all"===s||"width"===s?0:parseFloat(n.width),a="all"===s||"height"===s?0:parseFloat(n.height),d=parseFloat(n.width)/JsNode.#i,h=parseFloat(n.height)/JsNode.#i,e.style.width=i+"px",e.style.height=a+"px"),r="all"===s||"opacity"===s?0:n.opacity,c=n.opacity/JsNode.#i,e.style.opacity=r,e.style.display=n.display,e.style.overflow="hidden";t>0&&("all"!==s&&"width"!==s||(i+=d,e.style.width=i+"px"),"all"!==s&&"height"!==s||(a+=h,e.style.height=a+"px"),"all"!==s&&"opacity"!==s||(r+=c,e.style.opacity=r),await JsNode.#y(o),!JsNode.#r);)t-=o;Object.assign(e.style,n)}static async#w(e,t,s){const o=t/JsNode.#i,n=JsNode.#b(e);let i,a,r,d,h,c;for("inline"===n.display&&(s="opacity"),"inline"!==n.display&&(i=parseFloat(n.width),a=parseFloat(n.height),d=i/JsNode.#i,h=a/JsNode.#i),r=n.opacity,c=r/JsNode.#i,e.style.overflow="hidden";t>0&&("all"!==s&&"width"!==s||(i-=d,e.style.width=i+"px"),"all"!==s&&"height"!==s||(a-=h,e.style.height=a+"px"),"all"!==s&&"opacity"!==s||(r-=c,e.style.opacity=r),await JsNode.#y(o),!JsNode.#r);)t-=o;Object.assign(e.style,n),JsNode.#J(e,!1)}static#E(e,t,s){return function(){e.apply(t,s)}}static#J(e,t){t?e.style.display=e.style.displayComputed||JsNode.#v(e.tagName):(e.style.displayComputed=getComputedStyle(e).display,e.style.display="none")}static#b(e){let t=JsNode.#g(e);if("none"===t.display||"auto"===t.width||"auto"===t.height||"0px"===t.width||"0px"===t.height){const s=e.style.display;"none"===t.display&&e.style.displayComputed&&(t.display=e.style.displayComputed),e.style.display="none"!==t.display?t.display:JsNode.#v(e.tagName),t=JsNode.#g(e),e.style.display=s}return t}static#v(e){return JsNode.#n.includes(e)?"block":"inline"}static use$(){return $=JsNode.select,$$=JsNode,JsNode}static domLoaded(){return new Promise(((e,t)=>{try{"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e()))}catch(e){t(e)}}))}static loadLibs(e){return new Promise(((s,o)=>{try{"complete"===document.readyState||"interactive"===document.readyState?s(t(e)):document.addEventListener("DOMContentLoaded",(()=>s(t(e))))}catch(e){o(e)}}));async function t(e){"string"!=typeof e&&"object"!=typeof e||(e=[e]);for(let t of e){let e;const o=typeof t;try{e="string"===o?await s(t):"object"===o&&await s(t.path,t.endBody,t.type,t.noExtension)}catch{throw new Error(`No se pudo cargar: '${"string"===o?t:t.path}'`)}}return!0}function s(e,t,s,o){return new Promise(((n,i)=>{let a,r;if(e.toLowerCase().endsWith(".js")?(a=document.createElement("script"),a.src=e,r="js"):e.toLowerCase().endsWith(".css")?(a=document.createElement("link"),a.href=e,a.rel="stylesheet",r="css"):o&&(a=document.createElement("script"),a.src=e,r="noExtension"),!r)return i(!1);s&&"string"==typeof s&&(a.type=s),a.onload=function(e){n(!0)},a.onerror=function(e){i(!1)};try{t?document.body.append(a):document.head.append(a)}catch{i(!1)}}))}}static select(e){return new JsNode(e)}static dateParts(e){const t={},s=(e=void 0!==e?new Date(e):new Date).getDay();e.setMinutes(e.getMinutes()-e.getTimezoneOffset());const o=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).(\d{3})Z$/.exec(e.toISOString());o.push(s,JsNode.#e[s],JsNode.#s[t.mon-1]),["year","mon","mday","hours","minutes","seconds","milliseconds"].forEach(((e,s)=>t[e]=parseInt(o[s+1]))),t.weekday=JsNode.#e[s],t.wday=0===s?7:s,t.month=JsNode.#s[t.mon-1];const n=new Date(e.getFullYear(),0,1);return t.yday=Math.ceil((e-n+1)/864e5),t.epoch=e.getTime(),t.offset=e.getTimezoneOffset(),t}static dateFormat(e="d/m/Y H:i:s:u",t){const s=JsNode.dateParts(t),o=[];function n(e,t=2){const n=s[e].toString();t>=0?o.push(n.padStart(t,"0")):o.push(n)}let i=!1;for(const t of e)if(i)o.push(t),i=!1;else switch(t){case"D":o.push(s.weekday.substring(0,3));break;case"F":n("month");break;case"G":n("hours",-1);break;case"H":n("hours");break;case"L":o.push(JsNode.isLeapYear(s.year)?"1":"0");break;case"M":o.push(s.month.substring(0,3));break;case"U":n("epoch",-1);break;case"Y":n("year",4);break;case"Z":n("offset",-1);break;case"d":n("mday");break;case"i":n("minutes");break;case"j":n("mday",-1);break;case"l":n("weekday");break;case"m":n("mon");break;case"n":n("mon",-1);break;case"s":n("seconds");break;case"t":let e;e=[1,3,5,7,8,10,12].includes(s.mon)?"31":[4,6,9,11].includes(s.mon)?"30":JsNode.isLeapYear(s.year)?"29":"28",o.push(e);break;case"u":n("milliseconds",3);break;case"w":n("wday",1);break;case"y":o.push(s.year.toString().padStart(4,"0").substring(2));break;case"z":n("yday",-1);break;case"\\":i=!0;break;default:o.push(t)}return o.join("")}static dateParse(e="d/m/Y",t="01/01/1970"){const s=["^"],o=[];let n=!1;for(const t of e)if(n)s.push(("\\"===t?t:"")+t),n=!1;else switch(t){case"D":s.push(`(${JsNode.#t.join("|")})`),o.push(t);break;case"F":s.push(`(${JsNode.#s.join("|")})`),o.push(t);break;case"G":s.push("(\\d{1,2})"),o.push(t);break;case"H":s.push("(\\d{2})"),o.push(t);break;case"L":s.push("([01])"),o.push(t);break;case"M":s.push(`(${JsNode.#o.join("|")})`),o.push(t);break;case"U":s.push("(-?\\d{1,16})"),o.push(t);break;case"Y":s.push("(\\d{4})"),o.push(t);break;case"Z":s.push("(-?\\d{1,3})"),o.push(t);break;case"d":s.push("(\\d{2})"),o.push(t);break;case"i":s.push("(\\d{2})"),o.push(t);break;case"j":s.push("(\\d{1,2})"),o.push(t);break;case"l":s.push(`(${JsNode.#e.join("|")})`),o.push(t);break;case"m":s.push("(\\d{2})"),o.push(t);break;case"n":s.push("(\\d{1,2})"),o.push(t);break;case"s":s.push("(\\d{2})"),o.push(t);break;case"t":s.push("(\\d{2})"),o.push(t);break;case"u":s.push("(\\d{3})"),o.push(t);break;case"w":s.push("([1-7])"),o.push(t);break;case"y":s.push("(\\d{2})"),o.push(t);break;case"z":s.push("(\\d{1,3})"),o.push(t);break;case"\\":n=!0;break;default:const e=["^","$","|",".","?","*","+","(",")","[","]","{","}"].includes(t);s.push((e?"\\":"")+t)}s.push("$");const i=t.match(s.join("")),a={};if(i){for(let e=0;e<o.length;e++)a[o[e]]=i[e+1];let e,t=0,s=1,n=0,r=0,d=0,h=0;return a.Y?e=a.Y:a.y&&(e=(new Date).getFullYear().toString().padStart(4,"0").substring(0,2)+a.y),a.m?t=parseInt(a.m)-1:a.n?t=parseInt(a.n)-1:a.F?t=JsNode.#s.indexOf(a.F):a.M&&(t=JsNode.#o.indexOf(a.M)),a.d?s=a.d:a.j&&(s=a.j),a.H?n=a.H:a.G&&(n=a.G),a.i&&(r=a.i),a.s&&(d=a.s),a.u&&(h=a.u),void 0!==e?new Date(e,t,s,n,r,d,h):a.U?new Date(parseInt(a.U)):NaN}return NaN}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static objectToUrlEncoded(e){let t="";for(let s in e)t&&(t+="&"),t+=s+"="+encodeURIComponent(e[s]);return t}static async post(e,t={},s="text"){return JsNode.#f(e,"POST",t,s)}static async put(e,t={},s="text"){return JsNode.#f(e,"PUT",t,s)}static async get(e,t={},s="text"){return JsNode.#m(e,"GET",t,s)}static async delete(e,t={},s="text"){return JsNode.#m(e,"DELETE",t,s)}static strToB64(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16)))))}static b64ToStr(e){const t=atob(e),s=t.length,o=new Uint8Array(s);for(let e=0;e<s;e++)o[e]=t.charCodeAt(e);return(new TextDecoder).decode(o)}static fileToDataUrl(e){return new Promise(((t,s)=>{try{const s=new FileReader;s.addEventListener("load",(e=>t(e.target.result))),s.readAsDataURL(e)}catch(e){s(e)}}))}static b64ToUint8(e){const t=atob(e),s=t.length,o=new Uint8Array(s);for(let e=0;e<s;e++)o[e]=t.charCodeAt(e);return o}static strToUint8(e){return(new TextEncoder).encode(e)}static uInt8ToStr(e){return(new TextDecoder).decode(e)}static blobToUint8(e){return new Promise((async(t,s)=>{try{t(new Uint8Array(await e.arrayBuffer()))}catch(e){s(e)}}))}static uInt8ToBlob(e,t){return new Blob([e],{type:t})}static blobToFile(e,t){return new File([e],t,{type:e.type})}static fileToBlob(e){return new Promise((async(t,s)=>{try{const s=await e.arrayBuffer();t(new Blob([new Uint8Array(s)],{type:e.type}))}catch(e){s(e)}}))}static isNumber(e){return isFinite(Number(e))}static isInteger(e){return JsNode.isNumber(e)&&e==Math.floor(e)}static randInt(e,t){return Math.floor((t-e+1)*Math.random()+1*e)}static randDec(e,t){return(t-e)*Math.random()+1*e}static round(e,t=0){const s=Math.pow(10,t);return Math.round(e*s)/s}static setCookie(e,t,s,o,n,i){let a=e+"="+encodeURIComponent(t);void 0!==s&&(a+="; expires="+s.toGMTString()),void 0!==o&&(a+="; domain="+o),void 0!==n&&(a+="; path="+n),void 0!==i&&i&&(a+="; secure"),document.cookie=a}static getCookie(e){if(0!=document.cookie.length){let t=document.cookie.indexOf(e+"=");if(t>=0){t+=e.length+1;let s=document.cookie.indexOf(";",t);return s=s>=0?s:document.cookie.length,decodeURIComponent(document.cookie.substring(t,s))}}}static getTypeName(e){return/^\[object (\w+)\]$/.exec(Object.prototype.toString.call(e))[1]}static get qsMap(){const e={},t=decodeURIComponent(location.search.substring(1).replace(/\+/g," "));if(t){const s=t.split("&");for(let t=0;t<s.length;t++)e[s[t].substring(0,s[t].indexOf("="))]=s[t].substring(s[t].indexOf("=")+1)}return e}static stop(){JsNode.#r||(JsNode.#a=[],JsNode.#r=!0)}css(e,t){return void 0!==t?(this.#d.forEach((s=>{s.style[e]=t})),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)t.style[s]=e[s]})),this):void 0===e?(this.#d.forEach((e=>{for(;e.style[0];)e.style[e.style[0]]=""})),this):this.#d[0]?.style[e]}filterText(e,t=!1,s=!1){return t&&(e=e.normalize("NFD").toLowerCase().replace(/[\u0300-\u036f]/g,"")),this.#d=this.#d.filter((o=>{let n;return n=t?o.innerText.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().indexOf(e)>=0:o.innerText.indexOf(e)>=0,s?!n:n})),this}filterRegExp(e,t="",s){const o=new RegExp(e,t);return this.#d=this.#d.filter(((e,t)=>{let n;return"function"==typeof s?(n=o.exec(e.innerText),n&&(n=s.call(new JsNode(e),n,t)),n=!!n):n=o.test(e.innerText),n})),this}select(e){let t=[];for(const s of this.#d){const o=Array.from(s.querySelectorAll(e));t=t.concat(o)}return new JsNode(t)}each(e){return this.#d.forEach(((t,s)=>e.call(new JsNode(t),s))),this}filter(e){return this.#d=this.#d.filter(((t,s)=>{let o;return o="function"==typeof e?!!e.call(new JsNode(t),s):t.matches(e),o})),this}slice(e=0,t){return this.#d=this.#d.slice(e,t),this}text(e){if(void 0===e){let e="";for(const t of this.#d)e+=t.textContent;return e}return this.empty(),this.#d.forEach(((t,s)=>{t.textContent="function"!=typeof e?e:e(t.textContent,s)})),this}html(e){return void 0===e?this.#d[0]?.innerHTML:(this.empty(),this.#d.forEach(((t,s)=>{t.innerHTML="function"!=typeof e?e:e(t.innerHTML,s)})),this)}val(e){return void 0===e?this.#d[0]?.value:(this.#d.forEach(((t,s)=>{t.value="function"!=typeof e?e:e(t.value,s)})),this)}attr(e,t){return void 0!==t?(this.#d.forEach(((s,o)=>{"function"!=typeof t?JsNode.#p(s,e,t):JsNode.#p(s,e,t(s.getAttribute(e),o))})),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)JsNode.#p(t,s,e[s])})),this):this.#d[0]?.getAttribute(e)}prop(e,t){return void 0!==t?(this.#d.forEach(((s,o)=>{s[e]="function"!=typeof t?t:t(s[e],o)})),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)t[s]=e[s]})),this):this.#d[0]?.[e]}after(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement?t.insertAdjacentElement("afterend",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("afterend",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("afterend",e)));return this}before(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement?t.insertAdjacentElement("beforebegin",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("beforebegin",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("beforebegin",e)));return this}append(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement?t.insertAdjacentElement("beforeend",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("beforeend",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("beforeend",e)));return this}prepend(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement?t.insertAdjacentElement("afterbegin",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("afterbegin",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("afterbegin",e)));return this}clone(){const e=[];for(const t of this.#d)e.push(t.cloneNode(!0));return new JsNode(e)}parent(e){const t=[];for(const s of this.#d){const o=s.parentElement;!o||t.includes(o)||void 0!==e&&!o.matches(e)||t.push(o)}return new JsNode(t)}parents(e,t){const s=[];for(const o of this.#d){let n=o.parentElement;for(;n&&(void 0===t||!n.matches(t));)s.includes(n)||void 0!==e&&!n.matches(e)||s.push(n),n=n.parentElement}return new JsNode(s)}parentsUntil(e){return this.parents(void 0,e)}children(e){const t=JsNode.isNumber(e);let s=[];for(const o of this.#d){const n=Array.from(o.children);let i;t&&(i=e<0?n.length+e:e);const a=n.filter(((s,o)=>void 0===e||(t?i==o:s.matches(e))));s=s.concat(a)}return new JsNode(s)}siblings(e,t=0,s){let o=[];for(const n of this.#d){let i;if(t<=0)for(i=n.previousElementSibling;i&&(void 0===e||i.matches(e))&&!o.includes(i)&&(void 0===s||!i.matches(s));)o.unshift(i),i=i.previousElementSibling;if(t>=0)for(i=n.nextElementSibling;i&&(void 0===e||i.matches(e))&&!o.includes(i)&&(void 0===s||!i.matches(s));)o.push(i),i=i.nextElementSibling}return new JsNode(o)}next(e){const t=[];for(const s of this.#d){const o=s.nextElementSibling;o&&(void 0===e||o.matches(e))&&t.push(o)}return new JsNode(t)}nextAll(e){return this.siblings(e,1)}nextUntil(e){return this.siblings(void 0,1,e)}prev(e){const t=[];for(const s of this.#d){const o=s.previousElementSibling;o&&(void 0===e||o.matches(e))&&t.push(s.previousElementSibling)}return new JsNode(t)}prevAll(e){return this.siblings(e,-1)}prevUntil(e){return this.siblings(void 0,-1,e)}addClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>e.classList.add(t)))})),this}removeClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>e.classList.remove(t)))})),this}toggleClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}))})),this}#A(e,t){this.#d.forEach((e=>delete e.isAnimating)),JsNode.#a.length&&setTimeout(JsNode.#a.shift()),JsNode.#r?JsNode.#r=!1:"function"==typeof e&&e.call(this),t()}show(e,t=0,s="opacity",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.show,this,[e,t,s,o])):new Promise((async n=>{s=s.toLowerCase(),this.#d.forEach(((e,t)=>{this.visible(t)||(e.isAnimating=!0)})),void 0!==t&&t>0&&await JsNode.#y(t);const i=[];this.#d.forEach(((t,o)=>{this.visible(o)||i.push(JsNode.#N(t,e,s))})),Promise.all(i).then((()=>{this.#A(o,n)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.show,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{this.visible(t)||JsNode.#J(e,!0)})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}hide(e,t=0,s="opacity",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.hide,this,[e,t,s,o])):new Promise((async n=>{s=s.toLowerCase(),this.#d.forEach(((e,t)=>{this.visible(t)&&(e.isAnimating=!0)})),void 0!==t&&t>0&&await JsNode.#y(t);const i=[];this.#d.forEach(((t,o)=>{this.visible(o)&&i.push(JsNode.#w(t,e,s))})),Promise.all(i).then((()=>{this.#A(o,n)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.hide,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{this.visible(t)&&JsNode.#J(e,!1)})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}toggle(e,t=0,s="opacity",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.toggle,this,[e,t,s,o])):new Promise((async n=>{s=s.toLowerCase(),this.#d.forEach((e=>{e.isAnimating=!0})),void 0!==t&&t>0&&await JsNode.#y(t);const i=[];this.#d.forEach(((t,o)=>{this.visible(o)?i.push(JsNode.#w(t,e,s)):i.push(JsNode.#N(t,e,s))})),Promise.all(i).then((()=>{this.#A(o,n)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.toggle,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{JsNode.#J(e,!this.visible(t))})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}focus(){for(const e of this.#d)e.focus();return this}click(){for(const e of this.#d)e.click();return this}remove(){for(;this.#d.length;){const e=this.#d.at(-1);JsNode.#c(e),JsNode.#l(e),e.remove(),this.#d.pop()}return this}empty(){for(const e of this.#d)JsNode.select(e.childNodes).remove();let e=0;for(;e<this.#d.length;){const t=this.#d[e];t.isConnected?e++:(t.remove(),this.#d.splice(e,1))}return this}one(e=0){return new JsNode(this.#d.at(e))}on(e,t){for(const s of this.#d){s.listeners||(s.listeners={}),s.listeners[e]||(s.listeners[e]=[]);const o=t.bind(new JsNode(s));s.addEventListener(e,o),s.listeners[e].push(o)}return this}off(e){for(const t of this.#d)e?JsNode.#h(t,e):JsNode.#c(t);return this}width(e){return void 0===e?this.#d[0]?parseFloat(getComputedStyle(this.#d[0]).width):void 0:(JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{if("function"!=typeof e)t.style.width=e;else{let o=e(parseFloat(getComputedStyle(t).width),s);JsNode.isNumber(o)&&(o+="px"),t.style.width=o}})),this)}height(e){return void 0===e?this.#d[0]?parseFloat(getComputedStyle(this.#d[0]).height):void 0:(JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{if("function"!=typeof e)t.style.height=e;else{let o=e(parseFloat(getComputedStyle(t).height),s);JsNode.isNumber(o)&&(o+="px"),t.style.height=o}})),this)}innerWidth(e){if(void 0!==e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{const o=getComputedStyle(t),n=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight);if("function"!=typeof e)t.style.width=e;else{let i=e(parseFloat(o.width)+n,s);JsNode.isNumber(i)&&(i+="px"),t.style.width=i}t.style.width=parseFloat(o.width)-n+"px"})),this;if(this.#d[0]){const e=getComputedStyle(this.#d[0]);return parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}}innerHeight(e){if(void 0!==e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{const o=getComputedStyle(t),n=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom);if("function"!=typeof e)t.style.height=e;else{let i=e(parseFloat(o.height)+n,s);JsNode.isNumber(i)&&(i+="px"),t.style.height=i}t.style.height=parseFloat(o.height)-n+"px"})),this;if(this.#d[0]){const e=getComputedStyle(this.#d[0]);return parseFloat(e.height)+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)}}outerWidth(e,t=!1){if(void 0!==e&&"boolean"!=typeof e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((s,o)=>{const n=getComputedStyle(s),i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth)+(t?parseFloat(n.marginLeft)+parseFloat(n.marginRight):0);if("function"!=typeof e)s.style.width=e;else{let t=e(parseFloat(n.width)+i,o);JsNode.isNumber(t)&&(t+="px"),s.style.width=t}s.style.width=parseFloat(n.width)-i+"px"})),this;if(this.#d[0]){const t=getComputedStyle(this.#d[0]);return parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)+(e?parseFloat(t.marginLeft)+parseFloat(t.marginRight):0)}}outerHeight(e,t=!1){if(void 0!==e&&"boolean"!=typeof e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((s,o)=>{const n=getComputedStyle(s),i=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth)+(t?parseFloat(n.marginTop)+parseFloat(n.marginBottom):0);if("function"!=typeof e)s.style.height=e;else{let t=e(parseFloat(n.height)+i,o);JsNode.isNumber(t)&&(t+="px"),s.style.height=t}s.style.height=parseFloat(n.height)-i+"px"})),this;if(this.#d[0]){const t=getComputedStyle(this.#d[0]);return parseFloat(t.height)+parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)+(e?parseFloat(t.marginTop)+parseFloat(t.marginBottom):0)}}get nodes(){return this.#d}get length(){return this.#d.length}visible(e=0){const t=this.#d[e];if(t){const e=getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility}}}