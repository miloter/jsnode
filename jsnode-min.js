/**
 * @summary JsNode is similar to a stripped-down jQuery using only
 * ES6+ and the Promise/async/await system where necessary.
 * @copyright miloter
 * @license MIT
 * @since 2025-06-06 
 * @version 0.6.1 2025-09-20
 */
"use strict";var $,$$;class JsNode{static#e="es"===this.locale?["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];static#t=JsNode.#e.map((e=>e.substring(0,3)));static#s="es"===this.locale?["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]:["january","february","march","april","may","june","july","august","september","october","november","december"];static#o=JsNode.#s.map((e=>e.substring(0,3)));static#i=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HR","LI","MAIN","NAV","NOSCRIPT","OL","P","PRE","SECTION","TABLE","TFOOT","UL","VIDEO"];static#n=60;static#a=[];static#r=!1;#d;constructor(e){try{if("string"==typeof e)this.#d=Array.from(document.querySelectorAll(e));else if(e instanceof Document||e instanceof Window||e instanceof HTMLElement)this.#d=[e];else if(e instanceof NodeList)this.#d=Array.from(e);else if(e instanceof Array)this.#d=e;else if(e instanceof JsNode)this.#d=e.nodes;else{if(void 0!==e)throw new TypeError(`Invalid selector: ${e}`);this.#d=[]}}catch(e){this.#d=[]}}static#l(e,t){if(!e.listeners)return;const s=e.listeners[t];if(s){for(const o of s)e.removeEventListener(t,o);delete e.listeners[t]}}static#h(e){if(e.listeners)for(const t in e.listeners)JsNode.#l(e,t)}static#c(e){e.displayComputed&&delete e.displayComputed,e.visibilityComputed&&delete e.visibilityComputed}static#p(e,t,s){null===s?e.removeAttribute(t):e.setAttribute(t,s)}static async#u(e,t){const{ok:s,status:o,statusText:i}=e,n={ok:s,status:o,statusText:i};return n.data="json"===t?await e.json():"text"===t?await e.text():await e.blob(),n}static async#m(e,t,s,o){let i,n;return"json"===(o=o.toLowerCase())?(i={"Content-Type":"application/json; charset=UTF-8"},n=JSON.stringify(s)):(i={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n=JsNode.objectToUrlEncoded(s)),fetch(e,{credentials:"include",headers:i,method:t,body:n}).then((e=>JsNode.#u(e,o)))}static async#f(e,t,s,o){return o=o.toLowerCase(),(s=JsNode.objectToUrlEncoded(s))&&(e+="?"+s),fetch(e,{credentials:"include",method:t}).then((e=>JsNode.#u(e,o)))}static#y(e=1){return JsNode.#r?Promise.resolve():new Promise((t=>setTimeout(t,e)))}static#b(e){const{display:t,width:s,height:o,opacity:i,overflow:n,visibility:a}=getComputedStyle(e);return{display:t,width:s,height:o,opacity:i,overflow:n,visibility:a}}static#g(e){const{width:t,height:s,opacity:o,overflow:i}=e.style;return{width:t,height:s,opacity:o,overflow:i}}static async#N(e,t,s){const o=t/JsNode.#n,i=JsNode.#w(e),n=JsNode.#g(e);let a,r,d,l,h,c;for("inline"===i.display&&(s="opacity"),"opacity"!==s&&(a="all"===s||"width"===s?0:parseFloat(i.width),r="all"===s||"height"===s?0:parseFloat(i.height),l=parseFloat(i.width)/JsNode.#n,h=parseFloat(i.height)/JsNode.#n,e.style.width=a+"px",e.style.height=r+"px"),d="all"===s||"opacity"===s?0:i.opacity,c=i.opacity/JsNode.#n,e.style.opacity=d,e.style.display=i.display,e.style.overflow="hidden","hidden"!==i.visibility&&"collapse"!==i.visibility||(e.style.visibilityComputed=i.visibility,i.visibility="visible",e.style.visibility="visible");t>0&&("all"!==s&&"width"!==s||(a+=l,e.style.width=a+"px"),"all"!==s&&"height"!==s||(r+=h,e.style.height=r+"px"),"all"!==s&&"opacity"!==s||(d+=c,e.style.opacity=d),await JsNode.#y(o),!JsNode.#r);)t-=o;Object.assign(e.style,n)}static async#v(e,t,s){const o=t/JsNode.#n,i=JsNode.#w(e),n=JsNode.#g(e);let a,r,d,l,h,c;for("inline"===i.display&&(s="opacity"),"inline"!==i.display&&"opacity"!==s&&(a=parseFloat(i.width),r=parseFloat(i.height),l=a/JsNode.#n,h=r/JsNode.#n),d=i.opacity,c=d/JsNode.#n,e.style.overflow="hidden";t>0&&("all"!==s&&"width"!==s||(a-=l,e.style.width=a+"px"),"all"!==s&&"height"!==s||(r-=h,e.style.height=r+"px"),"all"!==s&&"opacity"!==s||(d-=c,e.style.opacity=d),await JsNode.#y(o),!JsNode.#r);)t-=o;Object.assign(e.style,n),JsNode.#J(e,!1,s,!0)}static#E(e,t,s){return function(){e.apply(t,s)}}static#J(e,t,s,o=!1){const i=getComputedStyle(e);t?("hidden"!==i.visibility&&"collapse"!==i.visibility||(e.style.visibilityComputed=i.visibility,e.style.visibility="visible"),e.style.display=e.style.displayComputed||JsNode.#A(e.tagName)):(e.style.displayComputed=i.display,"opacity"===s||!o&&e.style.visibilityComputed?e.style.visibility=e.style.visibilityComputed??"hidden":e.style.display="none")}static#w(e){let t=JsNode.#b(e);if("none"===t.display||"auto"===t.width||"auto"===t.height||"0px"===t.width||"0px"===t.height){const s=e.style.display;"none"===t.display&&e.style.displayComputed&&(t.display=e.style.displayComputed),e.style.display="none"!==t.display?t.display:JsNode.#A(e.tagName),t=JsNode.#b(e),e.style.display=s}return t}static#A(e){return JsNode.#i.includes(e)?"block":"TR"===e?"table-row":"TH"===e||"TD"===e?"table-cell":"THEAD"===e?"table-header-group":"TBODY"===e?"table-row-group":"TFOOT"===e?"table-footer-group":"inline"}static use$(){return $=JsNode.select,$$=JsNode,JsNode}static domLoaded(){return new Promise(((e,t)=>{try{"complete"===document.readyState||"interactive"===document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e()))}catch(e){t(e)}}))}static loadLibs(e){return new Promise(((s,o)=>{try{"complete"===document.readyState||"interactive"===document.readyState?s(t(e)):document.addEventListener("DOMContentLoaded",(()=>s(t(e))))}catch(e){o(e)}}));async function t(e){"string"!=typeof e&&"Object"!==JsNode.getTypeName(e)||(e=[e]);for(let t of e){let e;const o=typeof t;try{e="string"===o?await s(t):"object"===o&&await s(t.path,t.endBody,t.type,t.noExtension)}catch{throw new Error(`No se pudo cargar: '${"string"===o?t:t.path}'`)}}return!0}function s(e,t,s,o){return new Promise(((i,n)=>{let a,r;if(e.toLowerCase().endsWith(".js")?(a=document.createElement("script"),a.src=e,r="js"):e.toLowerCase().endsWith(".css")?(a=document.createElement("link"),a.href=e,a.rel="stylesheet",r="css"):o&&(a=document.createElement("script"),a.src=e,r="noExtension"),!r)return n(!1);s&&"string"==typeof s&&(a.type=s),a.onload=function(e){i(!0)},a.onerror=function(e){n(!1)};try{t?document.body.append(a):document.head.append(a)}catch{n(!1)}}))}}static select(e){return new JsNode(e)}static toDocument(e,t="text/html"){return new JsNode((new DOMParser).parseFromString(e,t))}static dateParts(e){const t={},s=(e=void 0!==e?new Date(e):new Date).getDay();e.setMinutes(e.getMinutes()-e.getTimezoneOffset());const o=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).(\d{3})Z$/.exec(e.toISOString());o.push(s,JsNode.#e[s],JsNode.#s[t.mon-1]),["year","mon","mday","hours","minutes","seconds","milliseconds"].forEach(((e,s)=>t[e]=parseInt(o[s+1]))),t.weekday=JsNode.#e[s],t.wday=0===s?7:s,t.month=JsNode.#s[t.mon-1];const i=new Date(e.getFullYear(),0,1);return t.yday=Math.ceil((e-i+1)/864e5),t.epoch=e.getTime(),t.offset=e.getTimezoneOffset(),t}static dateFormat(e="d/m/Y H:i:s:u",t){const s=JsNode.dateParts(t),o=[];function i(e,t=2){const i=s[e].toString();t>=0?o.push(i.padStart(t,"0")):o.push(i)}let n=!1;for(const t of e)if(n)o.push(t),n=!1;else switch(t){case"D":o.push(s.weekday.substring(0,3));break;case"F":i("month");break;case"G":i("hours",-1);break;case"H":i("hours");break;case"L":o.push(JsNode.isLeapYear(s.year)?"1":"0");break;case"M":o.push(s.month.substring(0,3));break;case"U":i("epoch",-1);break;case"Y":i("year",4);break;case"Z":i("offset",-1);break;case"d":i("mday");break;case"i":i("minutes");break;case"j":i("mday",-1);break;case"l":i("weekday");break;case"m":i("mon");break;case"n":i("mon",-1);break;case"s":i("seconds");break;case"t":let e;e=[1,3,5,7,8,10,12].includes(s.mon)?"31":[4,6,9,11].includes(s.mon)?"30":JsNode.isLeapYear(s.year)?"29":"28",o.push(e);break;case"u":i("milliseconds",3);break;case"w":i("wday",1);break;case"y":o.push(s.year.toString().padStart(4,"0").substring(2));break;case"z":i("yday",-1);break;case"\\":n=!0;break;default:o.push(t)}return o.join("")}static dateParse(e="d/m/Y",t="01/01/1970"){const s=["^"],o=[];let i=!1;for(const t of e)if(i)s.push(("\\"===t?t:"")+t),i=!1;else switch(t){case"D":s.push(`(${JsNode.#t.join("|")})`),o.push(t);break;case"F":s.push(`(${JsNode.#s.join("|")})`),o.push(t);break;case"G":s.push("(\\d{1,2})"),o.push(t);break;case"H":s.push("(\\d{2})"),o.push(t);break;case"L":s.push("([01])"),o.push(t);break;case"M":s.push(`(${JsNode.#o.join("|")})`),o.push(t);break;case"U":s.push("(-?\\d{1,16})"),o.push(t);break;case"Y":s.push("(\\d{4})"),o.push(t);break;case"Z":s.push("(-?\\d{1,3})"),o.push(t);break;case"d":s.push("(\\d{2})"),o.push(t);break;case"i":s.push("(\\d{2})"),o.push(t);break;case"j":s.push("(\\d{1,2})"),o.push(t);break;case"l":s.push(`(${JsNode.#e.join("|")})`),o.push(t);break;case"m":s.push("(\\d{2})"),o.push(t);break;case"n":s.push("(\\d{1,2})"),o.push(t);break;case"s":s.push("(\\d{2})"),o.push(t);break;case"t":s.push("(\\d{2})"),o.push(t);break;case"u":s.push("(\\d{3})"),o.push(t);break;case"w":s.push("([1-7])"),o.push(t);break;case"y":s.push("(\\d{2})"),o.push(t);break;case"z":s.push("(\\d{1,3})"),o.push(t);break;case"\\":i=!0;break;default:const e=["^","$","|",".","?","*","+","(",")","[","]","{","}"].includes(t);s.push((e?"\\":"")+t)}s.push("$");const n=t.match(s.join("")),a={};if(n){for(let e=0;e<o.length;e++)a[o[e]]=n[e+1];let e,t=0,s=1,i=0,r=0,d=0,l=0;return a.Y?e=a.Y:a.y&&(e=(new Date).getFullYear().toString().padStart(4,"0").substring(0,2)+a.y),a.m?t=parseInt(a.m)-1:a.n?t=parseInt(a.n)-1:a.F?t=JsNode.#s.indexOf(a.F):a.M&&(t=JsNode.#o.indexOf(a.M)),a.d?s=a.d:a.j&&(s=a.j),a.H?i=a.H:a.G&&(i=a.G),a.i&&(r=a.i),a.s&&(d=a.s),a.u&&(l=a.u),void 0!==e?new Date(e,t,s,i,r,d,l):a.U?new Date(parseInt(a.U)):NaN}return NaN}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static objectToUrlEncoded(e){let t="";for(let s in e)t&&(t+="&"),t+=s+"="+encodeURIComponent(e[s]);return t}static async post(e,t={},s="text"){return JsNode.#m(e,"POST",t,s)}static async put(e,t={},s="text"){return JsNode.#m(e,"PUT",t,s)}static async get(e,t={},s="text"){return JsNode.#f(e,"GET",t,s)}static async delete(e,t={},s="text"){return JsNode.#f(e,"DELETE",t,s)}static strToB64(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16)))))}static b64ToStr(e){const t=atob(e),s=t.length,o=new Uint8Array(s);for(let e=0;e<s;e++)o[e]=t.charCodeAt(e);return(new TextDecoder).decode(o)}static fileToDataUrl(e){return new Promise(((t,s)=>{try{const s=new FileReader;s.addEventListener("load",(e=>t(e.target.result))),s.readAsDataURL(e)}catch(e){s(e)}}))}static b64ToUint8(e){const t=atob(e),s=t.length,o=new Uint8Array(s);for(let e=0;e<s;e++)o[e]=t.charCodeAt(e);return o}static strToUint8(e){return(new TextEncoder).encode(e)}static uInt8ToStr(e){return(new TextDecoder).decode(e)}static blobToUint8(e){return new Promise((async(t,s)=>{try{t(new Uint8Array(await e.arrayBuffer()))}catch(e){s(e)}}))}static uInt8ToBlob(e,t){return new Blob([e],{type:t})}static blobToFile(e,t){return new File([e],t,{type:e.type})}static fileToBlob(e){return new Promise((async(t,s)=>{try{const s=await e.arrayBuffer();t(new Blob([new Uint8Array(s)],{type:e.type}))}catch(e){s(e)}}))}static isNumber(e){return isFinite(Number(e))}static isInteger(e){return JsNode.isNumber(e)&&e==Math.floor(e)}static randInt(e,t){return Math.floor((t-e+1)*Math.random()+1*e)}static randDec(e,t){return(t-e)*Math.random()+1*e}static round(e,t=0){const s=Math.pow(10,t);return Math.round(e*s)/s}static setCookie(e,t,s,o,i,n){let a=e+"="+encodeURIComponent(t);void 0!==s&&(a+="; expires="+s.toGMTString()),void 0!==o&&(a+="; domain="+o),void 0!==i&&(a+="; path="+i),void 0!==n&&n&&(a+="; secure"),document.cookie=a}static getCookie(e){if(0!=document.cookie.length){let t=document.cookie.indexOf(e+"=");if(t>=0){t+=e.length+1;let s=document.cookie.indexOf(";",t);return s=s>=0?s:document.cookie.length,decodeURIComponent(document.cookie.substring(t,s))}}}static getTypeName(e){return/^\[object (\w+)\]$/.exec(Object.prototype.toString.call(e))[1]}static get locale(){return Intl.DateTimeFormat().resolvedOptions().locale.substring(0,2)}static get qsMap(){const e={},t=decodeURIComponent(location.search.substring(1).replace(/\+/g," "));if(t){const s=t.split("&");for(let t=0;t<s.length;t++)e[s[t].substring(0,s[t].indexOf("="))]=s[t].substring(s[t].indexOf("=")+1)}return e}static stop(){JsNode.#r||(JsNode.#a=[],JsNode.#r=!0)}#C(){this.#d.forEach((e=>{if(e.style.displayComputed||e.style.visibilityComputed){const t=getComputedStyle(e);e.style.displayComputed&&"none"!==t.display&&t.display!==e.style.displayComputed&&(e.style.displayComputed=t.display),e.style.visibilityComputed&&t.visibility!==e.style.visibilityComputed&&("visible"===t.visibility?delete e.style.visibilityComputed:e.style.visibilityComputed=t.visibility)}}))}#F(e,t){this.#d.forEach((e=>delete e.isAnimating)),JsNode.#a.length&&setTimeout(JsNode.#a.shift()),JsNode.#r?JsNode.#r=!1:"function"==typeof e&&e(this),t()}css(e,t){return void 0!==t?(this.#d.forEach((s=>{s.style[e]=t})),this.#C(),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)t.style[s]=e[s]})),this.#C(),this):void 0===e?(this.#d.forEach((e=>{for(;e.style[0];)e.style[e.style[0]]="";this.#C()})),this):this.#d[0]?.style[e]}filterText(e,t=!1,s=!1){return t&&(e=e.normalize("NFD").toLowerCase().replace(/[\u0300-\u036f]/g,"")),this.#d=this.#d.filter((o=>{let i;return i=t?o.innerText.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().indexOf(e)>=0:o.innerText.indexOf(e)>=0,s?!i:i})),this}filterRegExp(e,t="",s){const o=new RegExp(e,t);return this.#d=this.#d.filter(((e,t)=>{let i;return"function"==typeof s?(i=o.exec(e.innerText),i&&(i=s(new JsNode(e),i,t)),i=!!i):i=o.test(e.innerText),i})),this}select(e){let t=[];for(const s of this.#d){const o=Array.from(s.querySelectorAll(e));t=t.concat(o)}return new JsNode(t)}each(e){return this.#d.forEach(((t,s)=>e(new JsNode(t),s))),this}filter(e){return this.#d=this.#d.filter(((t,s)=>{let o;return o="function"==typeof e?!!e(new JsNode(t),s):t.matches(e),o})),this}slice(e=0,t){return this.#d=this.#d.slice(e,t),this}text(e){if(void 0===e){let e="";for(const t of this.#d)e+=t.textContent;return e}return this.empty(),this.#d.forEach(((t,s)=>{t.textContent="function"!=typeof e?e:e(t.textContent,s)})),this}html(e){return void 0===e?this.#d[0]?.innerHTML:(this.empty(),this.#d.forEach(((t,s)=>{t.innerHTML="function"!=typeof e?e:e(t.innerHTML,s)})),this)}val(e){return void 0===e?this.#d[0]?.value:(this.#d.forEach(((t,s)=>{t.value="function"!=typeof e?e:e(t.value,s)})),this)}attr(e,t){return void 0!==t?(this.#d.forEach(((s,o)=>{"function"!=typeof t?JsNode.#p(s,e,t):JsNode.#p(s,e,t(s.getAttribute(e),o))})),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)JsNode.#p(t,s,e[s])})),this):this.#d[0]?.getAttribute(e)}prop(e,t){return void 0!==t?(this.#d.forEach(((s,o)=>{s[e]="function"!=typeof t?t:t(s[e],o)})),this):"object"==typeof e?(this.#d.forEach((t=>{for(const s in e)t[s]=e[s]})),this):this.#d[0]?.[e]}after(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("afterend",e):e instanceof HTMLElement?t.insertAdjacentElement("afterend",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("afterend",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("afterend",e)));return this}before(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("beforebegin",e):e instanceof HTMLElement?t.insertAdjacentElement("beforebegin",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("beforebegin",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("beforebegin",e)));return this}append(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement?t.insertAdjacentElement("beforeend",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("beforeend",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("beforeend",e)));return this}prepend(e){for(const t of this.#d)"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement?t.insertAdjacentElement("afterbegin",e):e instanceof NodeList||e instanceof Array?e.forEach((e=>t.insertAdjacentElement("afterbegin",e))):e instanceof JsNode&&e.nodes.forEach((e=>t.insertAdjacentElement("afterbegin",e)));return this}clone(){const e=[];for(const t of this.#d)e.push(t.cloneNode(!0));return new JsNode(e)}parent(e){const t=[];for(const s of this.#d){const o=s.parentElement;!o||t.includes(o)||void 0!==e&&!o.matches(e)||t.push(o)}return new JsNode(t)}parents(e,t){const s=[];for(const o of this.#d){let i=o.parentElement;for(;i&&(void 0===t||!i.matches(t));)s.includes(i)||void 0!==e&&!i.matches(e)||s.push(i),i=i.parentElement}return new JsNode(s)}parentsUntil(e){return this.parents(void 0,e)}children(e){const t=JsNode.isNumber(e);let s=[];for(const o of this.#d){const i=Array.from(o.children);let n;t&&(n=e<0?i.length+e:e);const a=i.filter(((s,o)=>void 0===e||(t?n==o:s.matches(e))));s=s.concat(a)}return new JsNode(s)}siblings(e,t=0,s){let o=[];for(const i of this.#d){let n;if(t<=0)for(n=i.previousElementSibling;n&&(void 0===e||n.matches(e))&&!o.includes(n)&&(void 0===s||!n.matches(s));)o.unshift(n),n=n.previousElementSibling;if(t>=0)for(n=i.nextElementSibling;n&&(void 0===e||n.matches(e))&&!o.includes(n)&&(void 0===s||!n.matches(s));)o.push(n),n=n.nextElementSibling}return new JsNode(o)}next(e){const t=[];for(const s of this.#d){const o=s.nextElementSibling;o&&(void 0===e||o.matches(e))&&t.push(o)}return new JsNode(t)}nextAll(e){return this.siblings(e,1)}nextUntil(e){return this.siblings(void 0,1,e)}prev(e){const t=[];for(const s of this.#d){const o=s.previousElementSibling;o&&(void 0===e||o.matches(e))&&t.push(s.previousElementSibling)}return new JsNode(t)}prevAll(e){return this.siblings(e,-1)}prevUntil(e){return this.siblings(void 0,-1,e)}addClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>e.classList.add(t)))})),this.#C(),this}removeClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>e.classList.remove(t)))})),this.#C(),this}toggleClass(e){const t=e.trim().split(/\s+/);return this.#d.forEach((e=>{t.forEach((t=>{e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}))})),this.#C(),this}hasClass(e){const t=e.trim().split(/\s+/);for(const e of this.#d){let s=!0;for(const o of t)if(!e.classList.contains(o)){s=!1;break}if(s)return!0}return!1}show(e,t=0,s="all",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.show,this,[e,t,s,o])):new Promise((async i=>{s=s.toLowerCase(),this.#d.forEach(((e,t)=>{this.visible(t)||(e.isAnimating=!0)})),void 0!==t&&t>0&&await JsNode.#y(t);const n=[];this.#d.forEach(((t,o)=>{this.visible(o)||n.push(JsNode.#N(t,e,s))})),Promise.all(n).then((()=>{this.#F(o,i)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.show,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{this.visible(t)||JsNode.#J(e,!0,s)})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}hide(e,t=0,s="all",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.hide,this,[e,t,s,o])):new Promise((async i=>{s=s.toLowerCase(),this.#d.forEach(((e,t)=>{this.visible(t)&&(e.isAnimating=!0)})),void 0!==t&&t>0&&await JsNode.#y(t);const n=[];this.#d.forEach(((t,o)=>{this.visible(o)&&n.push(JsNode.#v(t,e,s))})),Promise.all(n).then((()=>{this.#F(o,i)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.hide,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{this.visible(t)&&JsNode.#J(e,!1,s)})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}toggle(e,t=0,s="all",o){return void 0!==e?this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.toggle,this,[e,t,s,o])):new Promise((async i=>{s=s.toLowerCase(),this.#d.forEach((e=>{e.isAnimating=!0})),void 0!==t&&t>0&&await JsNode.#y(t);const n=[];this.#d.forEach(((t,o)=>{this.visible(o)?n.push(JsNode.#v(t,e,s)):n.push(JsNode.#N(t,e,s))})),Promise.all(n).then((()=>{this.#F(o,i)}))})):this.#d.some((e=>e.isAnimating))?JsNode.#a.push(JsNode.#E(this.toggle,this,[e,t,s,o])):(this.#d.forEach(((e,t)=>{JsNode.#J(e,!this.visible(t),s)})),JsNode.#a.length&&setTimeout(JsNode.#a.shift())),this}focus(){for(const e of this.#d)e.focus();return this}click(){for(const e of this.#d)e.click();return this}remove(){for(;this.#d.length;){const e=this.#d.at(-1);JsNode.#h(e),JsNode.#c(e),e.remove(),this.#d.pop()}return this}empty(){for(const e of this.#d)JsNode.select(e.childNodes).remove();let e=0;for(;e<this.#d.length;){const t=this.#d[e];t.isConnected?e++:(t.remove(),this.#d.splice(e,1))}return this}one(e=0){return new JsNode(this.#d.at(e))}on(e,t){for(const s of this.#d){s.listeners||(s.listeners={}),s.listeners[e]||(s.listeners[e]=[]);const o=t.bind(new JsNode(s));s.addEventListener(e,o),s.listeners[e].push(o)}return this}off(e){for(const t of this.#d)e?JsNode.#l(t,e):JsNode.#h(t);return this}width(e){return void 0===e?this.#d[0]?parseFloat(getComputedStyle(this.#d[0]).width):void 0:(JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{if("function"!=typeof e)t.style.width=e;else{let o=e(parseFloat(getComputedStyle(t).width),s);JsNode.isNumber(o)&&(o+="px"),t.style.width=o}})),this)}height(e){return void 0===e?this.#d[0]?parseFloat(getComputedStyle(this.#d[0]).height):void 0:(JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{if("function"!=typeof e)t.style.height=e;else{let o=e(parseFloat(getComputedStyle(t).height),s);JsNode.isNumber(o)&&(o+="px"),t.style.height=o}})),this)}innerWidth(e){if(void 0!==e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{const o=getComputedStyle(t),i=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight);if("function"!=typeof e)t.style.width=e;else{let n=e(parseFloat(o.width)+i,s);JsNode.isNumber(n)&&(n+="px"),t.style.width=n}t.style.width=parseFloat(o.width)-i+"px"})),this;if(this.#d[0]){const e=getComputedStyle(this.#d[0]);return parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)}}innerHeight(e){if(void 0!==e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((t,s)=>{const o=getComputedStyle(t),i=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom);if("function"!=typeof e)t.style.height=e;else{let n=e(parseFloat(o.height)+i,s);JsNode.isNumber(n)&&(n+="px"),t.style.height=n}t.style.height=parseFloat(o.height)-i+"px"})),this;if(this.#d[0]){const e=getComputedStyle(this.#d[0]);return parseFloat(e.height)+parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)}}outerWidth(e,t=!1){if(void 0!==e&&"boolean"!=typeof e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((s,o)=>{const i=getComputedStyle(s),n=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth)+(t?parseFloat(i.marginLeft)+parseFloat(i.marginRight):0);if("function"!=typeof e)s.style.width=e;else{let t=e(parseFloat(i.width)+n,o);JsNode.isNumber(t)&&(t+="px"),s.style.width=t}s.style.width=parseFloat(i.width)-n+"px"})),this;if(this.#d[0]){const t=getComputedStyle(this.#d[0]);return parseFloat(t.width)+parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)+(e?parseFloat(t.marginLeft)+parseFloat(t.marginRight):0)}}outerHeight(e,t=!1){if(void 0!==e&&"boolean"!=typeof e)return JsNode.isNumber(e)&&(e+="px"),this.#d.forEach(((s,o)=>{const i=getComputedStyle(s),n=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+(t?parseFloat(i.marginTop)+parseFloat(i.marginBottom):0);if("function"!=typeof e)s.style.height=e;else{let t=e(parseFloat(i.height)+n,o);JsNode.isNumber(t)&&(t+="px"),s.style.height=t}s.style.height=parseFloat(i.height)-n+"px"})),this;if(this.#d[0]){const t=getComputedStyle(this.#d[0]);return parseFloat(t.height)+parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth)+(e?parseFloat(t.marginTop)+parseFloat(t.marginBottom):0)}}get nodes(){return this.#d}get length(){return this.#d.length}visible(e=0){const t=this.#d[e];if(t){const e=getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility&&"collapse"!==e.visibility}}}